<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Treinamento Comercial â€“ Funil Completo LTL</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 min-h-screen p-6">

<h1 class="text-2xl font-bold mb-2">ðŸšš Treinamento Comercial â€“ Funil Completo (Transportadora LTL)</h1>
<p class="mb-6 text-slate-600">Simulador interativo por etapa do funil. O cliente reage de acordo com SUAS perguntas.</p>

<div class="grid grid-cols-1 md:grid-cols-4 gap-4">
  <div class="md:col-span-1 bg-white rounded-2xl shadow p-4">
    <h2 class="font-semibold mb-2">ðŸ“Š Etapa do Funil</h2>
    <select id="stage" class="w-full border rounded-xl p-2 text-sm" onchange="resetSim()">
      <option value="prospect">ProspecÃ§Ã£o</option>
      <option value="qualify">QualificaÃ§Ã£o</option>
      <option value="diagnostic">DiagnÃ³stico</option>
      <option value="proposal">Proposta</option>
      <option value="cross">Cross Sell</option>
      <option value="close">Fechamento</option>
    </select>

    <div class="mt-4">
      <h3 class="font-semibold text-sm mb-1">ðŸŽ¯ Objetivo</h3>
      <p id="objective" class="text-xs text-slate-600"></p>
    </div>

    <button onclick="startScenario()" class="mt-6 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-xl w-full text-sm font-semibold">Iniciar SimulaÃ§Ã£o</button>
  </div>

  <div class="md:col-span-3 bg-white rounded-2xl shadow flex flex-col">
    <div id="chat" class="flex-1 p-6 space-y-3 overflow-y-auto"></div>
    <div class="border-t p-4 flex gap-2">
      <input id="input" class="flex-1 border rounded-xl px-4 py-2 text-sm" placeholder="Digite sua pergunta ou fala comercial..." />
      <button onclick="send()" class="bg-slate-900 text-white px-4 py-2 rounded-xl text-sm">Enviar</button>
    </div>
  </div>
</div>

<script>
let score = 0;

const objectives = {
  prospect: "Quebrar objeÃ§Ã£o e gerar abertura",
  qualify: "Descobrir volume, frequÃªncia, rotas e decisor",
  diagnostic: "Mapear dores logÃ­sticas reais",
  proposal: "AvanÃ§ar para proposta ou reuniÃ£o",
  cross: "Expandir rotas ou volume do cliente ativo",
  close: "Confirmar acordo, alinhar prÃ³ximos passos e fechar"
};

function resetSim() {
  document.getElementById('chat').innerHTML = "";
  score = 0;
}

function startScenario() {
  resetSim();
  const stage = document.getElementById('stage').value;
  document.getElementById('objective').innerText = objectives[stage];
  bot('Cliente: Pode falar, mas seja breve.');
}

function send() {
  const input = document.getElementById('input');
  const text = input.value.trim();
  if (!text) return;
  user(text);
  input.value = "";
  setTimeout(() => respond(text), 600);
}

function user(text) {
  chat.innerHTML += `<div class='text-right'><div class='inline-block bg-orange-100 px-4 py-2 rounded-xl text-sm'>${text}</div></div>`;
  chat.scrollTop = chat.scrollHeight;
}

function bot(text) {
  chat.innerHTML += `<div class='text-left'><div class='inline-block bg-slate-200 px-4 py-2 rounded-xl text-sm'>${text}</div></div>`;
  chat.scrollTop = chat.scrollHeight;
}

function respond(text) {
  const t = text.toLowerCase();
  const stage = document.getElementById('stage').value;

  if (stage === 'prospect') {
    if (t.includes('motivo') || t.includes('rapido') || t.includes('objetivo')) {
      score++;
      bot('Cliente: Ok, pode falar. O que vocÃª quer saber?');
    } else {
      bot('Cliente: VocÃª jÃ¡ estÃ¡ vendendo. O que exatamente vocÃª quer entender?');
    }
  }

  if (stage === 'qualify') {
    if (t.includes('volume')) { score++; bot('Cliente: Em mÃ©dia 3 embarques por semana.'); }
    else if (t.includes('frequ')) { score++; bot('Cliente: Toda semana, sem falhar.'); }
    else if (t.includes('rota') || t.includes('destino')) { score++; bot('Cliente: SP, PR e RS.'); }
    else if (t.includes('decisor')) { score++; bot('Cliente: Sou eu mesmo que decido.'); }
    else bot('Cliente: NÃ£o sei se isso Ã© relevante agora.');
  }

  if (stage === 'diagnostic') {
    if (t.includes('problema') || t.includes('dor') || t.includes('dificuldade')) {
      score++;
      bot('Cliente: Atraso e pouca visibilidade das entregas.');
    } else {
      bot('Cliente: Hoje funciona, mas poderia melhorar.');
    }
  }

  if (stage === 'proposal') {
    if (t.includes('reuni') || t.includes('proposta') || t.includes('analise')) {
      score++;
      bot('Cliente: Pode preparar algo e me enviar.');
    } else if (t.includes('preÃ§o')) {
      bot('Cliente: PreÃ§o agora nÃ£o faz sentido sem entender melhor.');
    } else {
      bot('Cliente: E qual seria o prÃ³ximo passo?');
    }
  }

  if (stage === 'cross') {
    if (t.includes('outra rota') || t.includes('mais envio') || t.includes('expand')) {
      score++;
      bot('Cliente: Hoje sÃ³ envio SP, mas posso avaliar outras rotas.');
    } else {
      bot('Cliente: Hoje isso nÃ£o estÃ¡ no radar.');
    }
  }

  if (stage === 'close') {
    if (t.includes('fechar') || t.includes('avanÃ§ar') || t.includes('iniciar') || t.includes('contrato')) {
      score++;
      bot('Cliente: Ok, podemos iniciar. Me envie o contrato e dados operacionais.');
    } else if (t.includes('preÃ§o')) {
      bot('Cliente: O valor estÃ¡ ok, sÃ³ preciso de seguranÃ§a no prazo.');
    } else {
      bot('Cliente: O que falta para avanÃ§armos?');
    }
  } else {
      bot('Cliente: Hoje isso nÃ£o estÃ¡ no radar.');
    }
  }

  if (score >= 3) {
    setTimeout(() => {
      bot('âœ… AvaliaÃ§Ã£o: Boa conduÃ§Ã£o! VocÃª avanÃ§ou corretamente esta etapa do funil.');
    }, 500);
  }
}
</script>
</body>
</html>
